apply plugin: 'java'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.apache.commons:commons-lang3:3.7'
    compile 'commons-io:commons-io:2.6'

    compile project(':modules:api')
    compile project(':modules:impl')
}

jar {
    manifest {
        attributes(['Main-Class': 'apollo.Main'])
    }
}

task copyRuntimeClasspath(type: Copy) {
    from configurations.compile

    into 'build/runtimeClasspath'
}

task cleanJetFiles {
    doLast {
        delete 'commons-io_jetpdb'
        delete 'commons-lang_jetpdb'
        delete 'mainapp_jetpdb'
        delete 'apollo-api_jetpdb'
        delete 'apollo-impl_jetpdb'
    }
}

build.dependsOn copyRuntimeClasspath
clean.dependsOn cleanJetFiles
